# [SYS-003] 마나 시스템 기획서

## 1. 목표
- 전투 템포를 결정하는 마나 충전/소모/상한 규칙을 고정한다.

## 2. 입력/출력
| 구분 | 내용 |
|---|---|
| 입력 | 시간 경과, 카드 사용 이벤트, 버프/디버프 |
| 출력 | 현재 마나 값, 카드 사용 가능 여부 |

## 3. 수치 규칙
| 항목 | 규칙 |
|---|---|
| 초기 마나 | 3 |
| 최대 마나 | 10 |
| 자연 회복 | 초당 0.8 |
| 소모 방식 | 카드 코스트 즉시 차감 |

## 4. 상태
| 상태 | 설명 |
|---|---|
| charging | 자연 회복 중 |
| enough | 현재 선택 카드 사용 가능 |
| insufficient | 코스트 부족 |
| capped | 최대치 도달 |

## 5. 예외 처리
| 예외 | 처리 |
|---|---|
| 마나 음수 발생 | 0으로 clamp + 오류 로그 |
| 최대치 초과 | 최대치로 clamp |
| 회복 중단 버그 | 타이머 재초기화 |

## 6. 구현 연결
- `scripts/battle/mana_system.gd`
- `scripts/ui/battle_hud.gd`

## 7. 검수 기준
- 10분 전투 시 마나 음수/초과 0건.
- 회복량 오차 1% 이내.

