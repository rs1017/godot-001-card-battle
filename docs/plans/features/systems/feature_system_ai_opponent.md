# [SYS-005] AI 상대 시스템 기획서

## 1. 목표
- PvE/PvP 대기 시 AI가 사람 플레이 패턴과 유사하게 카드 배치를 수행한다.

## 2. 입력/출력
| 구분 | 내용 |
|---|---|
| 입력 | 현재 마나, 손패, 레인 점유 상태, 타워 HP |
| 출력 | 카드 선택, 배치 레인, 배치 타이밍 |

## 3. 의사결정 규칙
| 항목 | 규칙 |
|---|---|
| 기본 주기 | 0.5초마다 판단 |
| 공격 우선 조건 | 아군 레인 우세 + 마나 5 이상 |
| 방어 우선 조건 | 적 유닛 3기 이상 접근 |
| 카드 선택 | 코스트 효율 + 현재 레인 위험도 |

## 4. 상태
| 상태 | 설명 |
|---|---|
| observe | 전장 관찰 |
| evaluate | 후보 카드 평가 |
| deploy | 배치 실행 |
| wait | 코스트 부족 대기 |

## 5. 예외 처리
| 예외 | 처리 |
|---|---|
| 유효 카드 없음 | 대기 후 재평가 |
| 마나 계산 불일치 | 재동기화 |
| 무한 대기 | 최소 코스트 카드 강제 선택 |

## 6. 구현 연결
- `scripts/battle/ai_opponent.gd`
- `scripts/battle/deck_manager.gd`

## 7. 검수 기준
- AI가 20초 이상 무행동 0회.
- 게임 종료까지 배치 실패율 1% 이하.

